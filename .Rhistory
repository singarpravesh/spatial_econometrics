}
lisa_map <- function(df, lisa, alpha = .05) {
clusters <- lisa_clusters(lisa,cutoff = alpha)
labels <- lisa_labels(lisa)
pvalue <- lisa_pvalues(lisa)
colors <- lisa_colors(lisa)
lisa_patterns <- labels[clusters+1]
pal <- match_palette(lisa_patterns,labels,colors)
labels <- labels[labels %in% lisa_patterns]
df["lisa_clusters"] <- clusters
tm_shape(df) +
tm_fill("lisa_clusters",labels = labels, palette = pal,style = "cat")
}
significance_map <- function(df, lisa, permutations = 999, alpha = .05) {
pvalue <- lisa_pvalues(lisa)
target_p <- 1 / (1 + permutations)
potential_brks <- c(.00001, .0001, .001, .01)
brks <- potential_brks[which(potential_brks > target_p & potential_brks < alpha)]
brks2 <- c(target_p, brks, alpha)
labels <- c(as.character(brks2), "Not Significant")
brks3 <- c(0, brks2, 1)
cuts <- cut(pvalue, breaks = brks3,labels = labels)
df["sig"] <- cuts
pal <- rev(brewer.pal(length(labels), "Greens"))
pal[length(pal)] <- "#D3D3D3"
tm_shape(df) +
tm_fill("sig", palette = pal)
}
# Chunk 15
library(rgeoda)
library(tmap)
# calculate the local Moran's I
local_moran(w = queen_weights(chi), df = chi[,"violent"]) -> chi_local_moran
# Plot the cluster map
lisa_map(chi, chi_local_moran) +
tm_borders()
# Plot the significane map
significance_map(chi, chi_local_moran)+
tm_borders()
# Chunk 16
tmap_mode("view")
lisa_map(chi, chi_local_moran) +
tm_borders()+
tm_layout(title = "Local Moran Cluster Map of Violent Crimes",legend.outside = TRUE)
tmap_mode("plot")
# Chunk 17
# compute the local moran using permutations
local_moran(w = queen_weights(chi),
df = chi[,"violent"],
permutations = 9999) -> chi_local_moran_permu
# plot the cluster map
lisa_map(chi, chi_local_moran_permu) +
tm_borders()
# Chunk 18
chi$cut_bls_unemp <- cut(chi$bls_unemp, breaks = 2)
lisa_map(chi, chi_local_moran) +
tm_borders()+
tm_facets(by = "cut_bls_unemp",
free.coords = FALSE,
drop.units = FALSE)
# Chunk 19
# Calculate the local Geary
local_geary(w = queen_weights(chi), chi[, "violent"]) -> chi_local_geary
# Plot the cluster map
lisa_map(chi, chi_local_geary)+
tm_borders()
# Plot the significance map
significance_map(chi, chi_local_geary)
# Plot the significance map
significance_map(chi, chi_local_geary) +
tm_borders()+
tm_layout("Loal Geary Significance Map", legend.outside = TRUE)
# Calculate the G statistic
rgeoda::local_g(w = queen_weights(chi), chi[, "violent"]) -> chi_local_g
# cluster map
lisa_map(chi, chi_local_g) +
tm_borders()
# Significance map
significance_map(chi, chi_local_g)+
tm_borders()
# Calculate the G statistic
rgeoda::local_gstar(w = queen_weights(chi), chi[, "violent"]) -> chi_local_gstar
# cluster map
lisa_map(chi, chi_local_gstar) +
tm_borders()
# Significance map
significance_map(chi, chi_local_gstar)+
tm_borders()
# cluster map with alpha = 0.01 and permutations = 9999
lisa_map(chi, chi_local_gstar, permutations = 9999, alpha = 0.01) +
tm_borders()
# cluster map with alpha = 0.01
lisa_map(chi, chi_local_gstar, alpha = 0.01) +
tm_borders()
# Significance map
significance_map(chi, chi_local_gstar, permutations = 9999, alpha = 0.01)+
tm_borders()
?local_gstar
spdep::lm.LMtests(chi, listw = queen_weights(chi))
spdep::lm.LMtests(chi, listw = nb2listw(chi))
spdep::lm.LMtests(chi, listw = nb2listw(chi_w))
?lm.LMtests
spdep::lm.LMtests(chi_ols, listw = nb2listw(chi_w))
spdep::lm.LMtests(chi_ols, listw = nb2listw(chi_w))
lm.RStests()
?lm.RStests()
# The robust LM test
spdep::lm.Rstests(chi_ols, listw = nb2listw(chi_w),
test = "RSlag")
# The robust LM test
spdep::lm.RStests(chi_ols, listw = nb2listw(chi_w),
test = "RSlag")
# The LM test spatial lag
spdep::lm.RStests(chi_ols, listw = nb2listw(chi_w),
test = "RRSlag")
# The LM test spatial lag
spdep::lm.RStests(chi_ols, listw = nb2listw(chi_w),
test = "adjRSlag")
install.packages('spatialreg')
library(spatialreg)
?lagsarlm()
# MLE of spatial autoregressive models
lagsarlm(violent ~ est_fcs_rt + bls_unemp,
data = chi,
listw = nb2listw(chi_w), zero.policy = TRUE)
# MLE of spatial autoregressive models
lagsarlm(violent ~ est_fcs_rt + bls_unemp,
data = chi,
listw = nb2listw(chi_w), zero.policy = TRUE) %>% summary()
# Load the necessary libraries
library(rvest)
library(dplyr)
# Define the URL for the property listings
url <- "https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R"
# Send a GET request to the URL
page <- read_html(url)
# Send a GET request to the URL
page <- read_html_live(url)
# Send a GET request to the URL
page <- read_html_live(url)
page
page %>%  html_elements("section")
page$View()
sess <- read_html_live("https://www.forbes.com/top-colleges/")
sess$view()
sess %>% html_elements(".TopColleges2023_tableRow__BYOSU")
sess$view()
sess <- read_html_live("https://www.forbes.com/top-colleges/")
sess$view()
# Load the necessary libraries
library(rvest)
library(dplyr)
sess <- read_html_live("https://www.forbes.com/top-colleges/")
sess$view()
rows <- sess %>% html_elements(".TopColleges2023_tableRow__BYOSU")
rows
html_elements(".TopColleges2023_table__4hfbE")
sess %>% html_elements(".TopColleges2023_table__4hfbE")
sess %>% html_elements(".TopColleges2023_table__4hfbE") %>% html_text2()
# Define the URL for the property listings
url <- "https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R"
# Send a GET request to the URL
page <- read_html_live(url)
page$View()
# Define the URL for the property listings
url <- "https://www.99acres.com"
# Send a GET request to the URL
page <- read_html_live(url)
page$View()
# Send a GET request to the URL
page <- read_html_live("https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R")
page$View()
library(rvest)
library(dplyr)
sess <- read_html_live("https://www.forbes.com/top-colleges/")
sess$view()
rows <- sess %>% html_elements(".TopColleges2023_table__4hfbE") %>% html_text2()
rows %>% html_element(".TopColleges2023_organizationName__J1lEV") %>% html_text()
rows <- sess %>% html_elements(".TopColleges2023_tableRow__BYOSU")
rows
rows %>% html_element(".TopColleges2023_organizationName__J1lEV") %>% html_text()
rows %>% html_element(".grant-aid") %>% html_text()
sess %>% html_elements("TopColleges2023_tableRow__3IGmkU")
sess %>% html_elements("div")
sess %>% html_elements("table")
sess %>% html_elements("#__next > div.HorizontalDefaultLayout_contentWrapper__RvzTK > div > div > div.TopColleges2023_tableBlock__2cW2s > div.TopColleges2023_tableWrapper__o3tS1 > div.TopColleges2023_hasLeftRail__9XJgX > div.TopColleges2023_filters__OXZ1_ > div.TopColleges2023_filtersWrapper__wAM3M > div.TopColleges2023_filtersFirstCol__1lerr")
rows <- sess %>% html_elements("#__next > div.HorizontalDefaultLayout_contentWrapper__RvzTK > div > div > div.TopColleges2023_tableBlock__2cW2s > div.TopColleges2023_tableWrapper__o3tS1 > div.TopColleges2023_hasLeftRail__9XJgX > div.TopColleges2023_filters__OXZ1_ > div.TopColleges2023_filtersWrapper__wAM3M > div.TopColleges2023_filtersFirstCol__1lerr")
rows %>% html_text2()
rows %>% html_text()
rows %>% html_text2()
sess %>% html_elements("#__next > div.HorizontalDefaultLayout_contentWrapper__RvzTK > div > div > div.TopColleges2023_tableBlock__2cW2s > div.TopColleges2023_tableWrapper__o3tS1 > div.TopColleges2023_table__4hfbE > div:nth-child(1) > div > div.TopColleges2023_headersRow__6AyU1 > div.TopColleges2023_columnHeader__ZhDfn.TopColleges2023_rank__6vFzI.TopColleges2023_activeSort__X03sq > div > div") %>% html_text2()
sess %>% html_elements("#__next > div.HorizontalDefaultLayout_contentWrapper__RvzTK > div > div > div.TopColleges2023_tableBlock__2cW2s > div.TopColleges2023_tableWrapper__o3tS1 > div.TopColleges2023_table__4hfbE") %>% html_text2()
sess <- read_html("https://www.forbes.com/top-colleges/")
sess %>% html_element("table")
sess %>% html_elements("table")
sess %>% html_elements(".table")
sess %>% html_elements("#__next > div.HorizontalDefaultLayout_contentWrapper__RvzTK > div > div > div.TopColleges2023_tableBlock__2cW2s > div.TopColleges2023_tableWrapper__o3tS1 > div.TopColleges2023_table__4hfbE")
sess %>% html_elements("role")
sess %>% html_elements("#princeton-university")
sess %>% html_elements("#princeton-university")
sess %>% html_element("#princeton-university")
sess %>% html_nodes("#princeton-university")
sess %>% html_nodes(".princeton-university")
sess %>% html_elements(".princeton-university")
sess %>% html_elements("class")
sess %>% html_elements("TopColleges2023_tableBlock__2cW2s")
sess %>% html_elements(".TopColleges2023_tableBlock__2cW2s")
sess %>% html_elements("TopColleges2023_rank__6vFzI")
web <- read_html("https://theordinary.com/en-de/100-plant-derived-squalane-face-oil-100398.html")
web %>% html_elements("h1.product-name")
web %>% html_elements("h1.product-name") %>% html_text()
# Send a GET request to the URL
page <- read_html("https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R")
# Send a GET request to the URL
page <- read_html_live("https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R")
page %>%  html_elements("section")
page %>%  html_elements("section") %>%  html_text()
page %>%  html_elements("<div class="tupleNew__locationName ellipsis">Action Area 3, Kolkata East</div>") %>%  html_text()
page %>%  html_elements("<div class="tupleNew__locationName.ellipsis">Action Area 3, Kolkata East</div>") %>%  html_text()
page %>%  html_elements("#O75779403 > div > div.tupleNew__innerCont > div.tupleNew__contentWrap > div.tupleNew__subWrapper > div > div.tupleNew__headingCont > div.tupleNew__headingNrera > div") %>%  html_text()
page %>%  html_elements("div.tupleNew__locationName ellipsis") %>%  html_text()
page %>%  html_elements("div.tupleNew__locationName.ellipsis") %>%  html_text()
page %>%  html_elements("div.tupleNew__locationName.ellipsis") %>%  html_text2()
page %>%  html_elements("div.tupleNew__headingNrera") %>%  html_text2()
page %>%  html_elements("div.tupleNew__tupleHeading") %>%  html_text2()
page %>%  html_elements("div.tupleNew__tupleHeading") %>%  html_text()
page %>%  htmnl_elements("section") %>%
html_elements("div.tupleNew__tupleHeading") %>%  html_text()
page %>%  html_elements("section") %>%
html_elements("div.tupleNew__tupleHeading") %>%  html_text()
page %>%  html_elements("section")
page %>%  html_elements("section") %>%
html_elements("class")
page %>%  html_elements("section") %>%
html_elements("div")
page %>%  html_elements("section") %>%
html_elements("div. pageComponent undefined")
page %>%  html_elements("section") %>%
html_elements("div. pageComponent.undefined")
page %>%  html_elements("section") %>%
html_elements("div.pageComponent.undefined")
page %>%  html_elements("section") %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section")
page %>%  html_elements("section") %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section.data-hydration-on-demand="true"")
page %>%  html_elements("section") %>%
html_elements("div.pageComponent.undefined")[1]
page %>%  html_elements("section") %>%
html_elements("div.pageComponent.undefined")[[1]]
page %>%  html_elements("section") %>%
html_elements("div.pageComponent.undefined") %>% html_text()
page %>%
html_elements("div.pageComponent.undefined") %>% html_text()
page %>%
html_elements("div.pageComponent.undefined")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section.data-hydration-on-demand="true"")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section")
html_elements("div#tupleNew__outerTupleWrap")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section")
html_elements("div#O75779403,tupleNew__outerTupleWrap")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section")
html_elements("div.tupleNew__tupleWrap.tupleNew__PremH")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div#O75779403,tupleNew__outerTupleWrap")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div#O75779403.tupleNew__outerTupleWrap")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div.tupleNew__locationName.ellipsis")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div.tupleNew__locationName.ellipsis") %>%  html_text()
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div.tupleNew__locationName.ellipsis") %>%
html_elements("div.tupleNew__propertyHeading.ellipsis") %>% html_text()
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div.tupleNew__propertyHeading.ellipsis") %>% html_text()
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div.tupleNew__propertyHeading.ellipsis")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("h2.tupleNew__propType") %>% html_text()
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("h2.tupleNew__propType") %>%
html_element("text")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("h2.tupleNew__propType") %>%
html_element("#text")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_element("#text")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_element("#text")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("h2")  %>% html_text()
locations <- page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("h2")  %>% html_text()
locations
page %>%
html_elements("div.tupleNew__perSqftWrap.ellipsis")
page %>%
html_elements("div.tupleNew__priceValWrap")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div.tupleNew__priceValWrap")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div.tupleNew__priceValWrap") %>%  html_text()
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("span") %>%  html_text()
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div.tupleNew__priceValWrap") %>%
html_elements("span")
page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("div.tupleNew__priceAreaWrap") %>%
html_elements("span")
%>%
page %>%
html_elements("div")
page %>%
html_elements("div")
page %>%
html_elements("div") %>%
html_elements("section")
page %>%
html_elements("div") %>%
html_elements("section") %>%
html_elements("div")
page %>%
html_elements("div") %>%
html_elements("section") %>%
html_elements("div") %>%
html_elements("h2")
html_elements("span")
page %>%
html_elements("div") %>%
html_elements("section") %>%
html_elements("div") %>%
html_elements("h2") %>%
html_elements("span")
# Load the necessary libraries
library(rvest)
library(dplyr)
# Send a GET request to the URL
page <- read_html_live("https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R")
# Load the necessary libraries
library(rvest)
library(dplyr)
# Send a GET request to the URL
page <- read_html_live("https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R")
# Load the necessary libraries
library(rvest)
# Send a GET request to the URL
page <- read_html_live("https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R")
?read_html_live
library(rvest)
??rvest
rvest
install.packages("rvest")
install.packages("rvest")
# Load the necessary libraries
library(rvest)
library(dplyr)
# Send a GET request to the URL
page <- read_html_live("https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R")
# Send a GET request to the URL
page <- read_html_live("https://www.99acres.com/search/property/buy/kolkata?city=25&keyword=kolkata&preference=S&area_unit=1&res_com=R")
locations <- page %>%
html_elements("div.pageComponent.undefined") %>%
html_elements("section") %>%
html_elements("h2")  %>% html_text()
page %>%
html_elements("div") %>%
html_elements("section") %>%
html_elements("div") %>%
html_elements("h2") %>%
html_elements("span")
page %>%
html_elements("div")
install.packages(RSelinium)
install.packages('RSelinium')
install.packages('netstat')
library(tidyverse) # for data wrangling
library(RSelenium) # activate Selenium server
install.packages("RSelenium")
library(RSelenium) # activate Selenium server
library(netstat) # find unused port
library(rvest) # web scrape tables
library(data.table) # for the rbindlist function
rs_driver_object <- rsDriver('chrome')
rs_driver_object <- rsDriver(browser = 'chrome')
sessionInfo()
rs_driver_object <- rsDriver(browser = 'chrome')
library(tidyverse) # for data wrangling
library(RSelenium) # activate Selenium server
library(netstat) # find unused port
library(rvest) # web scrape tables
library(data.table) # for the rbindlist function
rs_driver_object <- rsDriver(browser = 'chrome')
Sys.setenv(JAVA_HOME="C:/Program Files/Java/")
rs_driver_object <- rsDriver(browser = 'chrome')
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jdk-22")
rs_driver_object <- rsDriver(browser = 'chrome')
Sys.setenv(JAVA_HOME="C:/Program Files/Java/jdk-22/")
rs_driver_object <- rsDriver(browser = 'chrome')
library(tidyverse) # for data wrangling
library(RSelenium) # activate Selenium server
library(netstat) # find unused port
library(rvest) # web scrape tables
library(data.table) # for the rbindlist function
rs_driver_object <- rsDriver(browser = 'chrome')
java_check()
library(tidyverse) # for data wrangling
library(RSelenium) # activate Selenium server
library(netstat) # find unused port
library(rvest) # web scrape tables
library(data.table) # for the rbindlist function
rs_driver_object <- rsDriver(browser = 'chrome')
binman::list_versions("chromedriver")
binman::list_versions("chromedriver")
rs_driver_object <- rsDriver(browser = 'chrome',
chromever = "126.0.6478.61",
verbose = F,
port = free_port())
rs_driver_object <- rsDriver(browser = 'chrome',
chromever = "114.0.5735.90",
verbose = F,
port = free_port())
library(tidyverse) # for data wrangling
library(RSelenium) # activate Selenium server
library(netstat) # find unused port
library(rvest) # web scrape tables
library(data.table) # for the rbindlist function
binman::list_versions("chromedriver")
binman::list_versions("chromedriver")$win64
binman::list_versions("chromedriver")
library(tidyverse) # for data wrangling
library(RSelenium) # activate Selenium server
library(netstat) # find unused port
library(rvest) # web scrape tables
library(data.table) # for the rbindlist function
binman::list_versions("chromedriver")
?binman::list_versions()
binman::list_versions("chromedriver", platform = "win64")
rs_driver_object <- rsDriver(browser = 'chrome',
chromever = "126.0.6478.62",
verbose = F, # verbose = F to suppress any messages
port = free_port()) # free_port() to find a free port to run the Selenium server
?rsDriver
rs_driver_object <- rsDriver(browser = 'chrome',
chromever = "latest",
verbose = F, # verbose = F to suppress any messages
port = free_port()) # free_port() to find a free port to run the Selenium server
rs_driver_object <- rsDriver(browser = 'firefox',
verbose = F, # verbose = F to suppress any messages
port = free_port()) # free_port() to find a free port to run the Selenium server
binman::list_versions("firefox")
rs_driver_object <- rsDriver(browser = 'chrome',
verbose = F, # verbose = F to suppress any messages
port = free_port()) # free_port() to find a free port to run the Selenium server
rs_driver_object <- rsDriver(browser = 'chrome',
verbose = F, # verbose = F to suppress any messages
port = free_port()) # free_port() to find a free port to run the Selenium server
rs_driver_object <- rsDriver(browser = 'chrome',
verbose = F) # verbose = F to suppress any messages
rs_driver_object <- rsDriver(browser = 'firefox',
verbose = F) # verbose = F to suppress any messages
